{% extends "publisher/_publisher_layout.html" %}

{% block meta_title %}
Publicise {% if display_title %}{{ display_title }}{% else %}{{ snap_title }}{% endif %}
{% endblock %}

{% block content %}
<div id="main-content">
  {% set selected_tab='publicise' %}
  {% include "publisher/_header.html" %}

  <div class="p-strip is-shallow">
    <div class="row">
      <div class="col-2">
        <label>Language:</label>
      </div>
      <div class="col-8">
        <form class="p-form--inline js-language-select">
          <select name="language">
            {% for lang, data in available.items() %}
              <option value="{{ lang }}">{{ data.title }}</option>
            {% endfor %}
          </select>
        </form>
        <p class="u-no-margin--bottom">You can contribute to translate these assets <a href="https://github.com/snapcore/snap-store-badges" target="_blank" class="p-link--external">in this repository</a>.</p>
      </div>
    </div>
`
    <div class="row">
      <hr />
    </div>

    {% for lang, data in available.items() %}
      <div id="{{ lang }}_content" class="js-language-content{% if loop.index != 1 %} u-hide{% endif %}">
        <div class="row">
          <div class="col-2">
          </div>
          <div class="col-8">
            <div class="col-5">
              <p class="snapcraft-publicise__images">
                {% set url = "images/badges/" + lang + "/snap-store-black.svg" %}
                <a href="https://snapcraft.io/{{ snap_name }}" title="{{ data.text }}">
                  <img src="{{ static_url(url) }}" />
                </a>
              </p>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-2">
            <label>HTML:</label>
          </div>
          <div class="col-8">
            <pre><code>&lt;a href="https://snapcraft.io/{{ snap_name }}" title="{{ data.text }}"&gt;
  &lt;img src="https://snapcraft.io/static/images/badges/{{ lang }}/snap-store-black.svg" alt="" /&gt;
&lt;/a&gt;</code></pre>
          </div>
        </div>

        <div class="row">
          <div class="col-2">
            <label>Markdown:</label>
          </div>
          <div class="col-8">
            <pre><code>[![{{ data.text }}](https://snapcraft.io/static/images/badges/{{ lang }}/snap-store-black.svg)](https://snapcraft.io/{{ snap_name }})</code></pre>
          </div>
        </div>

        <div class="row">
          <hr />
        </div>

        <div class="row">
          <div class="col-2">
          </div>
          <div class="col-8">
            <div class="col-5">
              <p class="snapcraft-publicise__images">
                {% set url = "images/badges/" + lang + "/snap-store-white.svg" %}
                <a href="https://snapcraft.io/{{ snap_name }}" title="{{ data.text }}">
                  <img src="{{ static_url(url) }}" />
                </a>
              </p>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-2">
            <label>HTML:</label>
          </div>
          <div class="col-8">
            <pre><code>&lt;a href="https://snapcraft.io/{{ snap_name }}" title="{{ data.text }}"&gt;
  &lt;img src="https://snapcraft.io/static/images/badges/{{ lang }}/snap-store-white.svg" alt="" /&gt;
&lt;/a&gt;</code></pre>
          </div>
        </div>

        <div class="row">
          <div class="col-2">
            <label>Markdown:</label>
          </div>
          <div class="col-8">
            <pre><code>[![{{ data.text }}](https://snapcraft.io/static/images/badges/{{ lang }}/snap-store-white.svg)](https://snapcraft.io/{{ snap_name }})</code></pre>
          </div>
        </div>
      </div>
    {% endfor %}

    <div class="row">
      <hr />
    </div>

    <div class="row">
      <div class="col-2">
        Download all:
      </div>
      <div class="col-8">
        <a href="https://github.com/snapcore/snap-store-badges/archive/v1.zip" class="p-button">zip</a>
        <a href="https://github.com/snapcore/snap-store-badges/archive/v1.tar.gz" class="p-button">tar.gz</a>
        <a href="https://raw.githubusercontent.com/snapcore/snap-store-badges/master/LICENSE.md" target="_blank" class="p-link--external">View license</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  Raven.context(function () {
    var languagePicker = document.querySelector('.js-language-select');

    function showLanguage(language) {
      var open = document.querySelector("#" + language + "_content");

      document.querySelector(".js-language-content:not(.u-hide)").classList.add("u-hide");
      open.classList.remove("u-hide");
    }

    var checked = document.querySelector("[name='language']:checked");

    if (!checked) {
      checked = document.querySelector("[name='language']");
      checked.setAttribute("checked", "checked");
    }

    showLanguage(checked.value);

    languagePicker.addEventListener("change", function(e) {
      console.log(this.elements["language"].value);
      showLanguage(this.elements["language"].value);
    });
  });
</script>
{% endblock %}
